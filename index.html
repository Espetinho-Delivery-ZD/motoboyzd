<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>WL Transportes - Distribui√ß√£o</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 700px;
      margin: 0 auto;
      padding: 20px;
      background-color: #1c1c1c;
      color: #f0f0f0;
    }
    header {
      text-align: center;
      margin-bottom: 20px;
    }
    header img {
      width: 100%;
      max-width: 300px;
      margin-bottom: 10px;
    }
    header h1 {
      margin: 10px 0;
      font-size: 28px;
      color: #c1121f;
    }
    header p {
      font-size: 16px;
      color: #aaaaaa;
    }

    input[type="number"], button {
      width: 100%;
      padding: 15px;
      margin: 10px 0;
      font-size: 18px;
      border-radius: 8px;
      border: none;
    }
    input[type="number"] {
      background-color: #333;
      color: #fff;
    }
    button {
      background-color: #c1121f;
      color: #fff;
      font-weight: bold;
      cursor: pointer;
    }
    button:hover {
      background-color: #ff4e00;
    }
    .motoboy {
      margin: 10px 0;
      font-size: 18px;
      text-align: left;
    }
    .motoboy input {
      transform: scale(1.2);
      margin-right: 10px;
    }
    .resultado a {
      display: block;
      margin-bottom: 12px;
      color: #00ff88;
      font-weight: bold;
      text-align: left;
    }
    .resultado h3 {
      margin-top: 30px;
      color: #ffffff;
    }

    @media (max-width: 600px) {
      input, button {
        font-size: 20px;
      }
    }
  </style>
</head>
<body>

  <header>
    <img src="logo-wl.jpeg" alt="Logo WL Transportes" />
    <h1>WL TRANSPORTES</h1>
    <p>Servi√ßo de Entrega</p>
  </header>

  <label for="pacotes">Quantidade Total de Pacotes:</label>
  <input type="number" id="pacotes" placeholder="Ex: 12" />

  <h3>Motoboys dispon√≠veis:</h3>
  <button onclick="selecionarTodos()">üïπÔ∏è Selecionar Todos</button>
  <div id="motoboy-list"></div>

  <button onclick="distribuir()">üì§ Distribuir e Gerar Mensagens</button>

  <div id="resultado" class="resultado"></div>

  <script>
    const motoboys = [
      { nome: "Jo√£o", numero: "55999999999", prioridade: 1 },
      { nome: "Maria", numero: "55888888888", prioridade: 2 },
      { nome: "Carlos", numero: "55777777777", prioridade: 3 },
      { nome: "Pedro", numero: "55666666666", prioridade: 4 },
      { nome: "Ana", numero: "55555555555", prioridade: 5 }
    ];

    function salvarSelecionados() {
      const selecionados = motoboys.map((_, i) => {
        const check = document.getElementById("motoboy" + i);
        return check.checked;
      });
      localStorage.setItem("motoboysSelecionados", JSON.stringify(selecionados));
    }

    function carregarSelecionados() {
      const salvos = JSON.parse(localStorage.getItem("motoboysSelecionados")) || [];
      salvos.forEach((val, i) => {
        const check = document.getElementById("motoboy" + i);
        if (check) check.checked = val;
      });
    }

    window.onload = () => {
      const container = document.getElementById("motoboy-list");
      motoboys.sort((a, b) => a.prioridade - b.prioridade).forEach((m, index) => {
        container.innerHTML += `
          <div class="motoboy">
            <input type="checkbox" id="motoboy${index}" value="${index}" onchange="salvarSelecionados()"/>
            <label for="motoboy${index}">${m.nome} (prioridade ${m.prioridade})</label>
          </div>
        `;
      });
      carregarSelecionados();
    };

    function selecionarTodos() {
      motoboys.forEach((_, i) => {
        const check = document.getElementById("motoboy" + i);
        if (check) check.checked = true;
      });
      salvarSelecionados();
    }

    function distribuir() {
      const totalPacotes = parseInt(document.getElementById("pacotes").value);
      const selecionados = [];

      motoboys.forEach((m, i) => {
        const checkbox = document.getElementById("motoboy" + i);
        if (checkbox && checkbox.checked) {
          selecionados.push(m);
        }
      });

      if (selecionados.length === 0 || isNaN(totalPacotes) || totalPacotes <= 0) {
        alert("Selecione ao menos 1 motoboy e defina um n√∫mero de pacotes v√°lido.");
        return;
      }

      const porMotoboy = Math.floor(totalPacotes / selecionados.length);
      let sobra = totalPacotes % selecionados.length;
      let html = "<h3>Mensagens Geradas:</h3>";

      selecionados.forEach((m) => {
        let qtd = porMotoboy + (sobra > 0 ? 1 : 0);
        if (sobra > 0) sobra--;

        const mensagem = `Ol√° ${m.nome}, voc√™ foi selecionado para a rota do dia. Ficar√° respons√°vel por ${qtd} pacotes. Boa entrega!`;
        const url = `https://wa.me/${m.numero}?text=${encodeURIComponent(mensagem)}`;

        html += `<a href="${url}" target="_blank">Enviar para ${m.nome} (${m.numero})</a>`;
      });

      document.getElementById("resultado").innerHTML = html;
    }
  </script>

</body>
</html>
